{"version":3,"sources":["app/app.js","app/dai/dai.config.js","app/dai/dai.directive.js","app/dai/dai.js","app/draggable/draggable.directive.js","app/draggable/draggable.js","app/dai/agent/agent.directive.js","app/dai/agent/agent.js","app/dai/api/api.config.js","app/dai/api/api.interceptor.js","app/dai/api/api.js","app/dai/api/api.service.js","app/dai/background/background.config.js","app/dai/background/background.directive.js","app/dai/background/background.js","app/dai/environment/environment.config.js","app/dai/environment/environment.js","app/dai/environment/environment.service.js","app/dai/map/map.config.js","app/dai/map/map.controller.js","app/dai/map/map.directive.js","app/dai/map/map.js","app/dai/map/map.service.js","app/dai/inspector/inspector.config.js","app/dai/inspector/inspector.directive.js","app/dai/inspector/inspector.js","app/dai/navigator/navigator.config.js","app/dai/navigator/navigator.controller.js","app/dai/navigator/navigator.directive.js","app/dai/navigator/navigator.js","app/dai/overview/overview.config.js","app/dai/overview/overview.directive.js","app/dai/overview/overview.js","app/dai/overview/overview.service.js","app/dai/papersoccer/papersoccer.config.js","app/dai/papersoccer/papersoccer.controller.js","app/dai/papersoccer/papersoccer.directive.js","app/dai/papersoccer/papersoccer.js","app/dai/map/location/location.config.js","app/dai/map/location/location.directive.js","app/dai/map/location/location.js","app/dai/navigator/graph/graph.directive.js","app/dai/navigator/graph/graph.js","app/dai/papersoccer/soccerfield/soccerfield.directive.js","app/dai/papersoccer/soccerfield/soccerfield.js","app/dai/map/controls/center/center.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular.module('app', ['templates', 'ngAnimate', 'angularMoment', '720kb.tooltips', 'dai'])\n  .directive('app', function() {\n    return {\n      restrict: 'A',\n      templateUrl: 'app/app.tpl.html'\n    };\n  })\n\n  .run(['$rootScope', function($rootScope) {\n    $rootScope.pageTitle = 'DISAI - Viewer';\n  }])\n\n  .config(['$logProvider', function($logProvider){\n    $logProvider.debugEnabled(false);// TODO beware: suppresses $log.debug()\n  }])\n  ;\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.config', ['dai.api', 'angularStats'])\n\n\t.config(['ApiServiceProvider', function(ApiServiceProvider) {\n\t\tApiServiceProvider.configure({\n\t\t\t\n\t\t});\n\t}])\n\n\t;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.directive', ['dai.environment', 'dai.overview.service', 'dai.map', 'dai.map.location', 'dai.agent', 'dai.inspector', 'dai.navigator', 'dai.papersoccer', 'dai.overview', 'dai.background'])\n\n  .directive('dai', ['$log', 'pollInterval', 'EnvironmentService', 'OverviewService', function( $log, pollInterval, EnvironmentService, OverviewService) {\n    return {\n      restrict: 'A',\n      templateUrl: 'app/dai/dai.tpl.html',\n      link: function(scope) {\n        scope.pollingEnabled = EnvironmentService.pollingEnabled;\n        scope.env = EnvironmentService.env;\n        scope.overview = OverviewService.overview;\n        scope.current = EnvironmentService.current;\n\n        scope.togglePoll = function() {\n          if (EnvironmentService.pollingEnabled()) {\n            EnvironmentService.setPollInterval( 0 );\n          } else {\n            EnvironmentService.setPollInterval( pollInterval );\n          }\n        };\n      }\n    };\n  }]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai', ['dai.config', 'dai.directive']);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('draggable.directive', [])\n\t.directive('draggable', ['$document', '$log', function($document, $log) {\n\t\treturn {\n      restrict: 'A',\n      link: function(scope, elm) {\n\t\t\t\t$log.debug('Making draggable on ', elm );\n        var startX, startY, initialMouseX, initialMouseY;\n        elm.css({position: 'absolute'});\n\n        elm.bind('mousedown', function($event) {\n          startX = elm.prop('offsetLeft');\n          startY = elm.prop('offsetTop');\n          initialMouseX = $event.clientX;\n          initialMouseY = $event.clientY;\n          $document.bind('mousemove', mousemove);\n          $document.bind('mouseup', mouseup);\n          return false;\n        });\n\n        function mousemove($event) {\n          var dx = $event.clientX - initialMouseX;\n          var dy = $event.clientY - initialMouseY;\n          elm.css({\n            top:  startY + dy + 'px',\n            left: startX + dx + 'px',\n\t\t\t\t\t\tright: 'auto',\n\t\t\t\t\t\tbottom: 'auto'\n          });\n          return false;\n        }\n\n        function mouseup() {\n          $document.unbind('mousemove', mousemove);\n          $document.unbind('mouseup', mouseup);\n        }\n      }\n    };\n\t}])\n\t;\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('draggable', ['draggable.directive'])\n\t;\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.agent.directive', ['dai.api'])\n\n\t.directive('daiAgent', ['ApiService', function(ApiService) {\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\ttemplateUrl: 'app/dai/agent/agent.tpl.html',\n\t\t\tlink: function(scope) {\n\t\t\t\tscope.api = ApiService;\n\t\t\t}\n\t\t};\n\t}]);\n\n})();","(function() {\n\t'use strict';\n\n\tangular.module('dai.agent', ['dai.agent.directive']);\n\n})();","(function() {\n\t'use strict';\n\n\tangular.module('dai.api.config', [])\n\n\t.config(['$httpProvider', function($httpProvider) {\n\t\t$httpProvider.interceptors.push('ApiInterceptor');\n\t}]);\n\n})();","(function() {\n\t'use strict';\n\n\tangular.module('dai.api.interceptor', ['dai.api.service'])\n\n\t.factory('ApiInterceptor', ['$q', '$log', '$injector', function($q, $log, $injector) {\n\t\tvar isApiUrl = function(url) {\n\t\t\tvar api = $injector.get('ApiService');\n\n\t\t\tvar apiUrl = api.service.getApiUrl();\n\n\t\t\tif (url.indexOf(apiUrl) === 0) {\n\t\t\t\t// API call\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\treturn {\n\t\t\trequest: function(config) {\n\t\t\t\tvar api = $injector.get('ApiService');\n\n\t\t\t\tif (isApiUrl(config.url)) {\n\t\t\t\t\tif (!config.noApiKeyRequired) {\n\t\t\t\t\t\t// Sets token on API request\n\t\t\t\t\t\tconfig.headers.agentToken = api.service.getAgentToken();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn config;\n\t\t\t},\n\n\t\t\trequestError: function(rejection) {\n\t\t\t\treturn rejection;\n\t\t\t},\n\n\t\t\tresponse: function(response) {\n\t\t\t\treturn response;\n\t\t\t},\n\n\t\t\tresponseError: function(rejection) {\n\t\t\t\t$log.warn('ApiInterceptor [responseError]');\n\n\t\t\t\t// if (isApiUrl(rejection.config.url)) {\n\t\t\t\t// \tif (rejection.status === 404) {\n\t\t\t\t// \t\t//TODO: Handle connection errors such that an agent can not die\n\t\t\t\t// \t}\n\t\t\t\t// }\n\n\t\t\t\treturn $q.reject(rejection);\n\t\t\t}\n\t\t};\n\t}]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.api', ['dai.api.config', 'dai.api.interceptor', 'dai.api.service']);\n\n})();","(function() {\n\t'use strict';\n\n\tangular.module('dai.api.service', [])\n\n\t.provider('ApiService', function() {\n\t\tthis.options = {\n\t\t\thost: ''\n\t\t};\n\n\t\tthis.configure = function configure(additionalOptions) {\n\t\t\tangular.extend(this.options, additionalOptions);\n\t\t};\n\n\t\tthis.$get = ['$log', '$http', '$q', function($log, $http, $q) {\n\t\t\tvar apiUrl = this.options.host + '/api/';\n\n\t\t\tvar agentToken = false;\n\n\t\t\t// Service functions\n\t\t\tvar getApiUrl = function() {\n\t\t\t\treturn apiUrl;\n\t\t\t};\n\n\t\t\tvar getAgentToken = function() {\n\t\t\t\treturn agentToken;\n\t\t\t};\n\n\t\t\t// History\n\t\t\tvar environmentHistory = function(since, count) {\n\t\t\t\treturn $http.get(apiUrl + 'environment/history', {\n\t\t\t\t\tnoApiKeyRequired: true,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tsince: since,\n\t\t\t\t\t\tcount: count\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\treturn response.data;\n\t\t\t\t}, function(errorResponse) {\n\t\t\t\t\t$log.warn('ApiService [history] error: ' + errorResponse.data.message);\n\t\t\t\t\treturn $q.reject('ApiService [history] error: ' + errorResponse.data.message);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tservice: {\n\t\t\t\t\tgetApiUrl: getApiUrl,\n\t\t\t\t\tgetAgentToken: getAgentToken\n\t\t\t\t},\n\n\t\t\t\tenvironmentHistory: environmentHistory\n\t\t\t};\n\t\t}];\n\t});\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.background.config', ['draggable'])\n\n  ;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.background.directive', [])\n\n  .directive('daiBackground', ['$log', function( $log ) {\n    return {\n      restrict: 'A',\n      scope: false,\n      templateUrl: 'app/dai/background/background.tpl.html',\n      link: function() {\n        $log.debug('Linking background');\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.background', ['dai.background.config', 'dai.background.directive']);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.environment.config', ['uiGmapgoogle-maps', 'dai.environment.service', 'dai.overview.service'])\n\n  .constant( 'pollInterval', 300 )\n\n  .run( ['$log', 'pollInterval', 'uiGmapGoogleMapApi', 'EnvironmentService', function( $log, pollInterval, uiGmapGoogleMapApi, EnvironmentService ) {\n  \tuiGmapGoogleMapApi.then(function(maps) {\n  \t\t$log.debug('Google Maps API Ready', maps);\n  \t\tEnvironmentService.setPollInterval( pollInterval );\n  \t});\n  }])\n\n  ;\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.environment', ['dai.environment.config']);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.environment.service', ['dai.api.service', 'dai.map.service'])\n\n\t.factory('EnvironmentService', ['$log', '$interval', '$rootScope', 'ApiService', 'MapService', function( $log, $interval, $rootScope, ApiService, MapService ) {\n\t\t$log.debug( 'EnvironmentService instantiating');\n\t\tvar pollIntervalPromise;\n\n\t\tvar stateHistory = [];\n\t\tvar actionHistory = [];\n\t\tvar env = {\n\t\t\tcurrent: {\n\t\t\t\tstate: {\n\t\t\t\t\tmap: {},\n\t\t\t\t\tnavigation: {}\n\t\t\t\t},\n\t\t\t\taction:{}\n\t\t\t},\n\t\t};\n\n\t\t// Initial should be undefined and not 0.\n\t\t// * 0 will get complete history.\n\t\t// * undefined will get only the latest point in the history.\n\t\tvar next;\n\t\tvar noNewDataCount = 0; // Used to throttle polling $log\n\t\tvar previousData = '';\n\n\t\tvar poll = function() {\n\t\t\treturn ApiService.environmentHistory(next, 1)\n\t\t\t.then(function(data) {\n\t\t\t\tif ( angular.equals(previousData, data ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tpreviousData = data;\n\t\t\t\tangular.forEach(data.states, function(state) {\n\t\t\t\t\tthis.push(state);\n\t\t\t\t}, stateHistory);\n\n\t\t\t\tangular.forEach(data.actions, function(action) {\n\t\t\t\t\tthis.push(action);\n\t\t\t\t}, actionHistory);\n\n\t\t\t\tif (stateHistory.length > 0) {\n\t\t\t\t\tif (typeof next === 'undefined') {\n\t\t\t\t\t\t// This is the first data => set initial\n\t\t\t\t\t\tMapService.setInitial(stateHistory[stateHistory.length - 1]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tMapService.updateMap(stateHistory[stateHistory.length - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (next < data.next || typeof next === 'undefined') {\n\t\t\t\t\tvar stateIndex = data.states.length-1;\n\n\t\t\t\t\tenv.currentAgents = data.states[stateIndex].agents;\n\t\t\t\t\tenv.currentNavigation = data.states[stateIndex].navigation;\n\t\t\t\t\tenv.currentPapersoccer = data.states[stateIndex].papersoccer;\n\t\t\t\t\tenv.actionCount = data.next - 1;\n\t\t\t\t\tenv.current = {\n\t\t\t\t\t\tstate: data.states[stateIndex],\n\t\t\t\t\t\taction: data.actions[stateIndex]\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tnext = data.next;\n\t\t\t\tif ( data.since === data.next ) {\n\t\t\t\t\tnoNewDataCount += 1;\n\t\t\t\t\tif ( noNewDataCount % 250 === 12 || noNewDataCount % 250 === 11 || noNewDataCount % 250 === 10 ) {\n\t\t\t\t\t\t$log.debug('EnvironmentService [poll] No new data[next=' + data.next + '. polls=' + noNewDataCount + '].', data);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// $log.debug('EnvironmentService [poll] Since != next[next=' + data.next + '. emptyPolls=' + noNewDataCount + '].', data);\n\t\t\t\t\tnoNewDataCount = 0;\n\t\t\t\t}\n\n\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\t$log.warn('EnvironmentService [poll] Could not load data, see error object.', error);\n\t\t\t})\n\t\t\t;\n\t\t};\n\n\t\tvar pollingEnabled = function() {\n\t\t\treturn angular.isDefined(pollIntervalPromise);\n\t\t};\n\n\t\t// Input\n\t\t// * interval <= 0 or undefined: Stop\n\t\t// * interval > 0: Poll each <interval> ms\n\t\tvar setPollInterval = function(interval) {\n\t\t\tif (!angular.isDefined(interval)) {\n\t\t\t\tinterval = 0;\n\t\t\t}\n\n\t\t\tif (angular.isDefined(pollIntervalPromise)) {\n\t\t\t\t$interval.cancel(pollIntervalPromise);\n\t\t\t\tpollIntervalPromise = undefined;\n\t\t\t}\n\n\t\t\tif (interval > 0) {\n\t\t\t\tnext = undefined;\n\t\t\t\tpoll()\n\t\t\t\t.then(function() {\n\t\t\t\t\tpollIntervalPromise = $interval(poll, interval);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tpollingEnabled: pollingEnabled,\n\t\t\tsetPollInterval: setPollInterval,\n\t\t\tenv: env,\n\t\t};\n\t}]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.map.config', ['uiGmapgoogle-maps', 'jsonFormatter'])\n\n  .config(['uiGmapGoogleMapApiProvider', function(uiGmapGoogleMapApiProvider) {\n    uiGmapGoogleMapApiProvider.configure({\n      v: '3',\n      libraries: 'weather,geometry,visualization'\n    });\n  }]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.map.controller', ['dai.map.service', 'dai.map.controls.center.controller'])\n\n  .controller('daiMapController', ['$scope', '$log', 'uiGmapGoogleMapApi', 'MapService', 'EnvironmentService', function($scope, $log, uiGmapGoogleMapApi, MapService, EnvironmentService ) {\n    $log.debug('Controller daiMapController', $scope);\n    $scope.map = MapService.map;\n    $scope.env = EnvironmentService.env;\n\n  }]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.map.directive', ['uiGmapgoogle-maps', 'dai.map.controller', 'dai.environment.service'])\n\n  .directive('daiMap', ['$log', function( $log ) {\n    return {\n      restrict: 'A',\n      templateUrl: 'app/dai/map/map.tpl.html',\n      controller: 'daiMapController',\n      controllerAs: 'daiMapCtrl',\n      link: function(scope, element) {\n        element.addClass('map');\n        $log.debug('Linking map', scope);\n\n        scope.locationMarkerClick = function (iMarker, eventName, oMarker) {\n          scope.locationOn = true;\n          var id = oMarker.id;\n          var key = id.substring(2, id.length); // TODO very hack\n          scope.clickedLocationKey = key;\n          scope.clickedLocation = scope.env.current.state.map.locations[key];\n        };\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.map', ['dai.map.config', 'dai.map.directive']);\n\n})();","(function() {\n\t'use strict';\n\n\tangular.module('dai.map.service', [])\n\n\t.factory('MapService', ['$log', function( $log ) {\n\t\t// var latestDataSet;\n\t\t$log.debug('Initializing MapService');\n\t\tvar initial = {\n\t\t\tzoom: 13,\n\t\t\toptions: {\n\t\t\t\t// disableDefaultUI: true,\n\t\t\t\t// panControl: false,\n\t\t\t\t// zoomControl: false,\n\t\t\t\tminZoom: 11,\n\t\t\t\tmaxZoom: 20,\n\t\t\t\t// draggable: false\n\t\t\t}\n\t\t};\n\n\t\tvar map = {\n\t\t\tlocationMarkers: [],\n\t\t\tagentMarkers: [],\n\t\t\tmetroPolylines: []\n\t\t};\n\n\t\tfunction setInitial(data) {\n\t\t\t// Setup center\n\t\t\tvar center = {\n\t\t\t\tlatitude: parseFloat(data.map.center.latitude),\n\t\t\t\tlongitude: parseFloat(data.map.center.longitude)\n\t\t\t};\n\n\t\t\tinitial.center = center;\n\n\t\t\t// Deep-copy initial properties to map\n\t\t\tangular.merge(map, initial);\n\n\t\t\t// Make metro lines\n\t\t\tvar count = 0;\n\t\t\tvar basePolyline = {\n\t\t\t\teditable: false,\n\t\t\t\tdraggable: false,\n\t\t\t\tgeodesic: true,\n\t\t\t\tstroke: {\n\t\t\t\t\tcolor: 'hsl(198, 83%, 63%)',\n\t\t\t\t\topacity: 0.9\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar makePolyline = function ( id, from, to, weight ) {\n\t\t\t\tvar fromLocation = data.map.locations[from];\n\t\t\t\tvar toLocation = data.map.locations[to];\n\t\t\t\tvar polyline = {\n\t\t\t\t\tid: id,\n\t\t\t\t\tpath: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatitude: fromLocation.coords.latitude,\n\t\t\t\t\t\t\tlongitude: fromLocation.coords.longitude\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tlatitude: toLocation.coords.latitude,\n\t\t\t\t\t\t\tlongitude: toLocation.coords.longitude\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tangular.extend( polyline, basePolyline );\n\t\t\t\tif ( weight > 7 ) {\n\t\t\t\t\tpolyline.stroke.weight = 5;\n\t\t\t\t} else {\n\t\t\t\t\tpolyline.stroke.weight = 4;\n\t\t\t\t}\n\t\t\t\treturn polyline;\n\t\t\t};\n\n\t\t\tangular.forEach(data.map.metro, function(obj, key) {\n\t\t\t\tvar locationId = key;\n\t\t\t\tvar cwLocationId = Object.keys( obj.cw )[0];\n\t\t\t\tvar ccwLocationId = Object.keys( obj.ccw )[0];\n\n\t\t\t\tthis.push( makePolyline( count, locationId, cwLocationId, obj.cw[cwLocationId] ) );\n\t\t\t\tcount += 1;\n\n\t\t\t\tthis.push( makePolyline( count, locationId, ccwLocationId, obj.ccw[ccwLocationId] ) );\n\t\t\t\tcount += 1;\n\t\t\t}, map.metroPolylines);\n\n\t\t\tupdateMap(data);\n\t\t}\n\n\t\tvar daiMapMarker = function( prefix, key, latitude, longitude, options ) {\n\t\t\treturn {\n\t\t\t\tid: prefix + '-' + key,\n\t\t\t\tlatitude: parseFloat(latitude),\n\t\t\t\tlongitude: parseFloat(longitude),\n\t\t\t\ticon: 'assets/empty1x1.png',\n\t\t\t\toptions: options,\n\t\t\t};\n\t\t};\n\n\t\tfunction updateMap(data) {\n\t\t\t// latestDataSet = data;\n\n\t\t\tmap.locationMarkers = [];\n\t\t\tmap.agentMarkers = [];\n\n\t\t\t// Populate location markers\n\t\t\tangular.forEach(data.map.locations, function(obj, key) {\n\t\t\t\tvar lblLocation = '<span class=\"location\"><i class=\"activity-location\"></i>' + obj.title + '</span>';\n\t\t\t\tvar lblActivities = '';\n\t\t\t\tangular.forEach( obj.activities, function( activity ) {\n\t\t\t\t\tif ( activity.config ) {\n\t\t\t\t\t\tvar seed = activity.config.seed;\n\t\t\t\t\t\tlblActivities += activity.config.type ? '<span class=\"activity\"><i class=\"activity-' + activity.config.type + '\"></i><span class=\"badge\">' + seed + '</span></span>' : '';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar markerRows = '<div class=\"marker-row\">' + lblActivities + lblLocation + '</div>';\n\t\t\t\tvar options = {\n\t\t\t\t\tzIndex: 5,\n\t\t\t\t\tlabelClass: 'marker-container',\n\t\t\t\t\tlabelContent: markerRows,\n\t\t\t\t\ttitle: obj.title\n\t\t\t\t};\n\t\t\t\tthis.push( daiMapMarker( 'l', key, obj.coords.latitude, obj.coords.longitude, options ) );\n\t\t\t}, map.locationMarkers);\n\n\t\t\t// Populate agent markers\n\t\t\tangular.forEach(data.agents, function(obj, key) {\n\t\t\t\tif (obj.hasOwnProperty('locationId')) {\n\t\t\t\t\tvar options = {\n\t\t\t\t\t\tzIndex: 2,\n\t\t\t\t\t\tlabelClass: 'marker-container',\n\t\t\t\t\t\tlabelContent: '<div class=\"marker-row agents\" style=\"margin-left: ' + ( obj.id * 16 ) + 'px\"><i class=\"agent-' + obj.id + '\"></i></div>',\n\t\t\t\t\t\ttitle: obj.name\n\t\t\t\t\t};\n\t\t\t\t\tthis.push( daiMapMarker( 'a', key, data.map.locations[obj.locationId].coords.latitude, data.map.locations[obj.locationId].coords.longitude, options ) );\n\t\t\t\t}\n\t\t\t}, map.agentMarkers);\n\t\t}\n\n\t\tfunction resetCenter() {\n\t\t\tangular.extend(map.center, initial.center);\n\t\t}\n\n\t\treturn {\n\t\t\t// Data\n\t\t\tmap: map,\n\n\t\t\t// Functions\n\t\t\tsetInitial: setInitial,\n\t\t\tupdateMap: updateMap,\n\n\t\t\tresetCenter: resetCenter\n\t\t};\n\t}]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.inspector.config', ['jsonFormatter', 'draggable'])\n\n  ;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.inspector.directive', [])\n\n  .directive('daiInspector', ['$log', function( $log ) {\n    return {\n      restrict: 'A',\n      scope: false,\n      templateUrl: 'app/dai/inspector/inspector.tpl.html',\n      link: function() {\n        $log.debug('Linking inspector');\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.inspector', ['dai.inspector.config', 'dai.inspector.directive']);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.navigator.config', ['draggable'])\n\n  ;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.navigator.controller', ['dai.environment'])\n\n  .controller('daiNavigatorController', ['$scope', '$log', function($scope, $log) {\n    $log.debug('Controller daiNavigatorController', $scope);\n  }]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.navigator.directive', ['dai.navigator.controller', 'dai.environment.service', 'dai.overview.service'])\n\n  .directive('daiNavigator', ['$log', 'EnvironmentService', 'OverviewService', function( $log, EnvironmentService, OverviewService ) {\n    return {\n      restrict: 'A',\n      scope: false,\n      templateUrl: 'app/dai/navigator/navigator.tpl.html',\n      controller: 'daiNavigatorController',\n      controllerAs: 'daiNavigatorCtrl',\n      link: function(scope, element) {\n        $log.debug( 'linking daiNavigator' );\n        element.addClass('navigator');\n        element.addClass('animate-show');\n\n        scope.navigator = {\n          problemInstance: undefined,\n          agent: undefined,\n        };\n\n        scope.env = EnvironmentService.env;\n        scope.overview = OverviewService.overview;\n\n        scope.$watch( 'env.currentNavigation', function( newValue, oldValue ) {\n          if( newValue !== oldValue ) {\n            var agToken = OverviewService.overview.selectedAgent.token;\n            if( angular.isDefined( newValue[agToken] ) ) {\n              var instance = newValue[agToken];\n              scope.navigator.agent = OverviewService.overview.selectedAgent.agent;\n              scope.navigator.problemInstance = instance;\n            } else {\n              scope.navigator.problemInstance = undefined;\n            }\n            scope.navigator.updateGraph();\n          }\n        } );\n\n        scope.$watch( 'overview.selectedAgent', function( newValue, oldValue ) {\n          if( !angular.equals( newValue, oldValue ) ) {\n            if( angular.isDefined( EnvironmentService.env.currentNavigation[newValue.token] ) ) {\n              scope.navigator.agent = newValue.agent;\n              scope.navigator.problemInstance = EnvironmentService.env.currentNavigation[newValue.token];\n            } else {\n              scope.navigator.agent = undefined;\n              scope.navigator.problemInstance = undefined;\n            }\n            scope.navigator.updateGraph();\n          }\n        } );\n\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.navigator', ['dai.navigator.config', 'dai.navigator.directive', 'dai.navigator.graph']);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.overview.config', ['jsonFormatter', 'draggable'])\n\n  ;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.overview.directive', ['dai.overview.service'])\n\n  .directive('daiOverview', ['$log', '$interval', '$timeout', '$filter', 'OverviewService', function( $log, $interval, $timeout, $filter, OverviewService ) {\n    return {\n      restrict: 'A',\n      scope: false,\n      templateUrl: 'app/dai/overview/overview.tpl.html',\n      // controller: 'daiMapController',\n      // controllerAs: 'daiMapCtrl',\n      link: function(scope, element) {\n        $log.debug('Linking overview');\n        element.addClass('overview');\n        scope.settings = {\n          selectedRowId: -1,\n          autoCycle: false,\n        };\n\n        scope.activeMessage = function( latestMessage ) {\n          if ( angular.isDefined( latestMessage) ) {\n            var res = -$filter( 'amDifference' )( latestMessage, null, 'seconds' );\n            return res < 11;\n          }\n\n          return false;\n        };\n\n        var cycle = function() {\n          var noAgents = OverviewService.overview.numberOfAgents();\n          scope.settings.selectedRowId = ( scope.settings.selectedRowId + 1 ) % ( noAgents );\n        };\n\n        var cyclerPromise;\n        scope.$watch( 'settings.autoCycle', function( newValue, oldValue ) {\n          if( newValue !== oldValue ) {\n            if ( angular.isDefined( cyclerPromise )  ) {\n              $interval.cancel( cyclerPromise );\n            }\n            if( newValue ) {\n              cycle();\n              cyclerPromise = $interval( cycle, 10000 );\n            }\n          }\n        });\n\n        scope.$watch( 'settings.selectedRowId', function( newValue, oldValue ) {\n          if( newValue !== oldValue ) {\n            OverviewService.overview.setSelectedAgent( newValue );\n          }\n        });\n\n        var initialAgentSet = false;\n        scope.$watch( 'env.currentAgents', function( newValue ) {\n          if( angular.isDefined( newValue ) ) {\n            var agCount = Object.keys(newValue).length;\n            if( !initialAgentSet && agCount > 0 ) {\n              initialAgentSet = true;\n              scope.settings.selectedRowId = 0;\n              OverviewService.overview.setSelectedAgent( newValue );\n            }\n            if( initialAgentSet && agCount === 0 ) {\n              initialAgentSet = false;\n            }\n          }\n        });\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.overview', ['dai.overview.config', 'dai.overview.directive', 'dai.overview.service'])\n\n\t;\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.overview.service', [ 'dai.environment.service'])\n\n\t.factory('OverviewService', ['$log', 'EnvironmentService', function( $log, EnvironmentService ) {\n\t\t$log.debug( 'OverviewService instantiating', EnvironmentService.env);\n\t\tvar overview = {\n\t\t\tselectedAgent: {\n\t\t\t\tagent: null,\n\t\t\t\ttoken: ''\n\t\t\t}\n\t\t};\n\n\t\toverview.setSelectedAgent = function( index ) {\n\t\t\tif ( angular.isDefined( EnvironmentService.env.currentAgents ) ) {\n\t\t\t\tvar keys = Object.keys( EnvironmentService.env.currentAgents );\n\t\t\t\tvar agentToken = keys[index];\n\t\t\t\tvar agent = EnvironmentService.env.currentAgents[agentToken];\n\t\t\t\toverview.selectedAgent = {\n\t\t\t\t\tagent: agent,\n\t\t\t\t\ttoken: agentToken,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t$log.warn('OverviewService.setSelectedAgent: EnvironmentService.env.currentAgents is undefined' );\n\t\t\t}\n\t\t};\n\n\t\toverview.numberOfAgents = function() {\n\t\t\tif( EnvironmentService.env.currentAgents ) {\n\t\t\t\treturn Object.keys( EnvironmentService.env.currentAgents ).length;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\treturn {\n\t\t\toverview: overview,\n\t\t};\n\t}]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.papersoccer.config', ['draggable'])\n\n  ;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.papersoccer.controller', ['dai.environment'])\n\n  .controller('daiPapersoccerController', ['$scope', '$log', function($scope, $log) {\n    $log.debug('Controller daiPapersoccerController', $scope);\n  }]);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.papersoccer.directive', ['dai.papersoccer.controller', 'dai.environment.service', 'dai.overview.service'])\n\n  .directive('daiPapersoccer', ['$log', 'EnvironmentService', 'OverviewService', function( $log, EnvironmentService, OverviewService ) {\n    return {\n      restrict: 'A',\n      scope: false,\n      templateUrl: 'app/dai/papersoccer/papersoccer.tpl.html',\n      controller: 'daiPapersoccerController',\n      controllerAs: 'daiPapersoccerCtrl',\n      link: function(scope, element) {\n        $log.debug( 'linking daiPapersoccer' );\n        element.addClass('papersoccer');\n        element.addClass('animate-show');\n\n        scope.papersoccer = {\n          problemInstance: undefined,\n          agent: undefined,\n        };\n\n        scope.env = EnvironmentService.env;\n        scope.overview = OverviewService.overview;\n\n        scope.$watch( 'env.currentPapersoccer', function( newValue, oldValue ) {\n          if( newValue !== oldValue ) {\n            var agToken = OverviewService.overview.selectedAgent.token;\n            if( angular.isDefined( newValue[agToken] ) ) {\n              var instance = newValue[agToken];\n              scope.papersoccer.agent = OverviewService.overview.selectedAgent.agent;\n              scope.papersoccer.problemInstance = instance;\n            } else {\n              scope.papersoccer.problemInstance = undefined;\n            }\n            scope.papersoccer.updateGraph();\n          }\n        } );\n\n        scope.$watch( 'overview.selectedAgent', function( newValue, oldValue ) {\n          if( !angular.equals( newValue, oldValue ) ) {\n            if( angular.isDefined( EnvironmentService.env.currentPapersoccer[newValue.token] ) ) {\n              scope.papersoccer.agent = newValue.agent;\n              scope.papersoccer.problemInstance = EnvironmentService.env.currentPapersoccer[newValue.token];\n            } else {\n              scope.papersoccer.agent = undefined;\n              scope.papersoccer.problemInstance = undefined;\n            }\n            scope.papersoccer.updateGraph();\n          }\n        } );\n\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.papersoccer', ['dai.papersoccer.config', 'dai.papersoccer.directive', 'dai.papersoccer.soccerfield']);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.map.location.config', ['draggable'])\n\n  ;\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.map.location.directive', [])\n\n  .directive('daiLocation', ['$log', function( $log ) {\n    return {\n      restrict: 'A',\n      scope: false,\n      templateUrl: 'app/dai/map/location/location.tpl.html',\n      link: function( scope ) {\n        $log.debug('Linking location');\n        scope.currentLocation = {};\n\n        scope.$watch( 'clickedLocation', function( newValue, oldValue ) {\n          if ( newValue !== oldValue ) {\n            scope.currentLocation = newValue;\n          }\n        });\n        scope.$watch( 'clickedLocationKey', function( newValue, oldValue ) {\n          if ( newValue !== oldValue ) {\n            var imgpath = 'assets/student/fa15/' + newValue;\n            scope.currentLocation.images = {\n              1: {\n                src: imgpath + '1.jpg',\n                thumb: imgpath + '1-thumb.jpg'\n              },\n              2: {\n                src: imgpath + '2.jpg',\n                thumb: imgpath + '2-thumb.jpg'\n              },\n              3: {\n                src: imgpath + '3.jpg',\n                thumb: imgpath + '3-thumb.jpg'\n              }\n            };\n          }\n        });\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.map.location', ['dai.map.location.config', 'dai.map.location.directive']);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.navigator.graph.directive', [])\n\n  .directive('daiNavigatorGraph', ['$log', function( $log ) {\n    return {\n      restrict: 'A',\n      templateUrl: 'app/dai/navigator/graph/graph.tpl.html',\n      link: function(scope, element) {\n        $log.debug( 'linking daiNavigatorGraph' );\n        element.addClass('graph');\n\n        var latestBuildInstance;\n        scope.navigator.updateGraph = function() {\n\n          var toBuild = scope.navigator.problemInstance;\n          if ( angular.isDefined(toBuild) && angular.isDefined(latestBuildInstance) ) {\n            if( !( angular.equals( toBuild.config, latestBuildInstance.config ) && angular.equals( toBuild.graph, latestBuildInstance.graph ) ) ) {\n              // $log.debug('updateGraph buildGraphBackground(', toBuild, ')' );\n              buildGraphBackground( toBuild );\n              latestBuildInstance = angular.copy( toBuild );\n            }\n          } else {\n            buildGraphBackground( toBuild );\n            latestBuildInstance = angular.copy( toBuild );\n          }\n        };\n\n\n        var buildGraphBackground = function( instance ) {\n          element.find('div').remove();\n          if( !angular.isDefined( instance ) ) {\n            return;\n          }\n          var container = angular.element('<div></div>');\n          container.addClass(instance.config.type);\n          var rows = parseInt( instance.config.size.rows );\n          var columns = parseInt( instance.config.size.columns );\n          for( var row = 0; row < rows; row++ ) {\n            var rowElement = angular.element('<div></div>');\n            rowElement.addClass('row');\n            for( var column = 0; column < columns; column++ ) {\n              var cell = angular.element('<i></i>');\n              var vertexKey = '[' + row + ',' + column +']';\n              var weight = instance.graph.vertices[vertexKey].weight;\n              var cellType = 'none';\n\n              var description = 'Nothing special going on here';\n              var factor = 1.0;\n              if( instance.graph.vertices[vertexKey].hasOwnProperty( 'type' ) ) {\n                cellType = instance.graph.vertices[vertexKey].type;\n                if( cellType === 'block' ) {\n                  description = 'Blocked cell';\n                }\n                if( instance.config.specials.hasOwnProperty( cellType ) ) {\n                  description = instance.config.specials[cellType].description;\n                  factor = parseFloat( instance.config.specials[cellType].factor );\n                  if ( weight > -9999 ) {\n                    var badge = angular.element('<span></span>');\n                    badge.addClass('weight-value');\n                    badge.css('padding', '1px');\n                    badge.text( weight );\n                    cell.append( badge );\n                  }\n                }\n              }\n              cell.addClass( 'w' + cellType );\n\n\n              cell.attr( 'title', description + ' [' + weight + ']' );\n\n              rowElement.append( cell );\n            }\n            container.append( rowElement );\n          }\n          element.append( container );\n        };\n\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.navigator.graph', [ 'dai.navigator.graph.directive']);\n\n})();\n","(function() {\n  'use strict';\n\n  angular.module('dai.papersoccer.soccerfield.directive', [])\n\n  .directive('daiSoccerfield', ['$log', function( $log ) {\n\n    return {\n      restrict: 'A',\n      templateUrl: 'app/dai/papersoccer/soccerfield/soccerfield.tpl.html',\n      link: function(scope, element) {\n        $log.debug( 'linking daiSoccerfield' );\n        element.addClass('soccerfield');\n\n        var latestBuildInstance;\n        scope.papersoccer.updateGraph = function() {\n\n          var toBuild = scope.papersoccer.problemInstance;\n          if ( angular.isDefined(toBuild) && angular.isDefined(latestBuildInstance) ) {\n            if( !( angular.equals( toBuild.config, latestBuildInstance.config ) && angular.equals( toBuild.currentVertex, latestBuildInstance.currentVertex ) ) ) {\n              buildGraphBackground( toBuild );\n              latestBuildInstance = angular.copy( toBuild );\n            }\n          } else {\n            buildGraphBackground( toBuild );\n            latestBuildInstance = angular.copy( toBuild );\n          }\n        };\n\n        var vertexId = function( row, column, dir ) {\n          if ( !dir ) {\n            return '['+ row + ',' + column + ']';\n          }\n\n          if( dir.indexOf('N') > - 1 ) {\n            row -= 1;\n          }\n          if( dir.indexOf('S') > - 1 ) {\n            row += 1;\n          }\n          if( dir.indexOf('W') > - 1 ) {\n            column -= 1;\n          }\n          if( dir.indexOf('E') > - 1 ) {\n            column += 1;\n          }\n\n          return vertexId( row, column );\n        };\n\n        var addEdges = function( td, vertex ) {\n          if( vertex.se ) {\n            td.append( angular.element('<i></i>').addClass( 'south-east south-east-' + vertex.se  ) );\n            td.append( angular.element('<b></b>').addClass( 'south-east south-east-' + vertex.se  ) );\n          }\n          if( vertex.sw ) {\n            td.append( angular.element('<i></i>').addClass( 'south-west south-west-' + vertex.sw  ) );\n            td.append( angular.element('<b></b>').addClass( 'south-west south-west-' + vertex.sw  ) );\n          }\n          if( vertex.s ) {\n            td.addClass( 'south south-' + vertex.s );\n          }\n          if( vertex.e ) {\n            td.addClass( 'east east-' + vertex.e );\n          }\n        };\n\n        var buildGraphBackground = function( instance ) {\n          element.find('div').remove();\n          if( !angular.isDefined( instance ) ) {\n            return;\n          }\n          var container = angular.element('<div></div>');\n          container.addClass(instance.config.type);\n          var problemK = parseInt( instance.config.k );\n          var rows = 5 + 2 * problemK;\n          var columns = 9 + 2 * problemK;\n          var table = angular.element('<table></table>');\n          for( var row = 0; row < rows; row++ ) {\n            var tr = angular.element('<tr></tr>');\n\n            for( var col = 0; col < columns; col++ ) {\n\n              var td = angular.element('<td></td>');\n              var dot = angular.element('<span></span>');\n              //TODO squares currently not used, but could remove issue with SW/SE cells\n              // var squares = angular.element('<div></div>');\n              // var squareTL = angular.element('<div></div>'), squareBL = angular.element('<div></div>'), squareTR = angular.element('<div></div>'), squareBR = angular.element('<div></div>');\n              // squareTL.addClass('tl').append( angular.element('<i></i>') ).append( angular.element('<b></b>') );\n              // squareBL.addClass('bl').append( angular.element('<i></i>') );\n              // squareTR.addClass('tr').append( angular.element('<i></i>') );\n              // squareBR.addClass('br').append( angular.element('<i></i>') );\n\n              var id = vertexId( row, col );\n              var vertex = instance.soccerfield.vertices[id];\n              if( instance.currentVertex.row === row && instance.currentVertex.column === col  ) {\n                dot.addClass( 'current' );\n                if( instance.isAgentsTurn ) {\n                  dot.addClass( 'agent' );\n                } else {\n                  dot.addClass( 'opponent' );\n                }\n              } else if( vertex ) {\n                if( row ===  2 + problemK && col === 0 ) {\n                  dot.addClass( 'goal' ).addClass( 'agent' );\n                } else if( row ===  2 + problemK && col === columns - 1 ) {\n                  dot.addClass( 'goal' ).addClass( 'opponent' );\n                }\n              } else {\n                dot.addClass( 'unreachable' );\n              }\n              if( vertex ) {\n                addEdges( td, vertex );\n              }\n\n              // squares.addClass('squares');\n              // squares.append( squareTL ).append( squareTR ).append( squareBL ).append( squareBR );\n              // td.append( squares );\n\n              td.append( dot.addClass( 'dot' ) );\n              tr.append( td );\n            }\n            table.append( tr );\n          }\n          container.append( table );\n          element.append( container );\n        };\n\n      }\n    };\n  }]);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.papersoccer.soccerfield', [ 'dai.papersoccer.soccerfield.directive']);\n\n})();\n","(function() {\n\t'use strict';\n\n\tangular.module('dai.map.controls.center.controller', ['dai.map.service'])\n\n\t.controller('CenterControlController', ['MapService', function(MapService) {\n\t\tthis.center = function() {\n\t\t\tMapService.resetCenter();\n\t\t};\n\t}]);\n\n})();"],"sourceRoot":"/source/"}